{"version":3,"file":"ToastPortal.js","sources":["../../../../src/components/Toast/components/ToastPortal.tsx"],"sourcesContent":["import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { Portal } from 'react-portal';\nimport { HorizontalSpacer, Column } from '../../Helpers';\nimport { typographyGuide } from '../../../primitives';\nimport Typography from '../../Typography';\nimport { Icon, ToastItem } from '../styles';\nimport { ToastIconProps, ToastProps } from '../types';\nimport { hexToRGBA } from '../../../utils';\nimport { getToastColor } from '@primitives/toasts';\n\nconst generateId = () => Math.random().toString(36).substring(2, 10);\n\nconst DEFAULT_MSG = 'Something went wrong!';\n\nconst DEFAULT_TYPE = 'error';\n\nconst ToastIcon = ({ icon }: ToastIconProps) => {\n    if (!icon) return null;\n    return <Icon src={icon} />;\n};\n\nexport const Toast = (props: ToastProps) => {\n    const {\n        id,\n        type,\n        content = DEFAULT_MSG,\n        colorConfig = getToastColor(type ?? DEFAULT_TYPE),\n        textStyle = { ...typographyGuide.toast },\n        fullWidth = true,\n        dismissOnClick = false,\n        description,\n        icon,\n        removeToast,\n        autoCloseTime,\n    } = props;\n\n    return (\n        <ToastItem\n            background={colorConfig.background}\n            autoCloseTime={autoCloseTime}\n            fullWidth={fullWidth}\n            onClick={() => (dismissOnClick && removeToast && id ? removeToast(id) : null)}\n        >\n            <Column>\n                <Typography {...textStyle.heading} color={colorConfig.color}>\n                    {content}\n                </Typography>\n                {description ? (\n                    <>\n                        <HorizontalSpacer n={1} />\n                        <Typography\n                            {...textStyle.description}\n                            color={hexToRGBA(colorConfig?.color, 0.5)}\n                        >\n                            {description}\n                        </Typography>\n                    </>\n                ) : null}\n            </Column>\n            <ToastIcon icon={icon} />\n        </ToastItem>\n    );\n};\n\nexport const ToastPortal = forwardRef((props, ref) => {\n    const [toastList, setToastList] = useState<ToastProps[]>([]);\n    const [removeId, setRemoveId] = useState<string | undefined>('');\n\n    useImperativeHandle(ref, () => ({\n        addToast(options: ToastProps) {\n            setToastList([...toastList, { ...options, id: generateId() }]);\n        },\n    }));\n\n    const removeToast = (id: string | undefined) => {\n        if (id) {\n            setToastList((toasts) => toasts.filter((toast) => toast.id !== id));\n        }\n    };\n\n    useEffect(() => {\n        if (removeId) {\n            removeToast(removeId);\n        }\n    }, [removeId]);\n\n    useEffect(() => {\n        if (toastList.length) {\n            const { id, autoCloseTime } = toastList[toastList.length - 1];\n            setTimeout(() => {\n                setRemoveId(id);\n            }, autoCloseTime || 3000);\n        }\n    }, [toastList]);\n\n    if (!toastList) return null;\n    if (toastList && !toastList.length) return null;\n\n    return (\n        <Portal>\n            <div>\n                {toastList.map((toastItemData) => {\n                    const { id, ...propsToFwd } = toastItemData;\n                    return <Toast key={id} id={id} {...propsToFwd} removeToast={removeToast} />;\n                })}\n            </div>\n        </Portal>\n    );\n});\n"],"names":["generateId","Math","random","toString","substring","DEFAULT_MSG","DEFAULT_TYPE","ToastIcon","icon","React","Icon","Toast","props","id","type","content","colorConfig","getToastColor","textStyle","_objectSpread","typographyGuide","toast","fullWidth","dismissOnClick","description","removeToast","autoCloseTime","ToastItem","background","Column","Typography","heading","color","HorizontalSpacer","hexToRGBA","ToastPortal","forwardRef","ref","useState","_slicedToArray","toastList","setToastList","removeId","setRemoveId","useImperativeHandle","addToast","options","_toConsumableArray","toasts","filter","useEffect","length","setTimeout","Portal","map","toastItemData","propsToFwd","_extends"],"mappings":"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"}