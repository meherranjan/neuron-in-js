{"version":3,"file":"ToastPortal.js","sources":["../../../../src/components/Toast/components/ToastPortal.tsx"],"sourcesContent":["import React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { Portal } from 'react-portal';\nimport { HorizontalSpacer, Column } from '../../Helpers';\nimport { typographyGuide } from '../../../primitives';\nimport Typography from '../../Typography';\nimport { Icon, ToastItem } from '../styles';\nimport { ToastIconProps, ToastProps } from '../types';\nimport { hexToRGBA } from '../../../utils';\nimport { getToastColor } from '@primitives/toasts';\n\nconst generateId = () => Math.random().toString(36).substring(2, 10);\n\nconst DEFAULT_MSG = 'Something went wrong!';\n\nconst DEFAULT_TYPE = 'error';\n\nconst ToastIcon = ({ icon }: ToastIconProps) => {\n    if (!icon) return null;\n    return <Icon src={icon} />;\n};\n\nexport const Toast = (props: ToastProps) => {\n    const {\n        id,\n        type,\n        content = DEFAULT_MSG,\n        colorConfig = getToastColor(type ?? DEFAULT_TYPE),\n        textStyle = { ...typographyGuide.toast },\n        fullWidth = true,\n        dismissOnClick = false,\n        description,\n        icon,\n        removeToast,\n        autoCloseTime,\n    } = props;\n\n    return (\n        <ToastItem\n            background={colorConfig.background}\n            autoCloseTime={autoCloseTime}\n            fullWidth={fullWidth}\n            onClick={() => (dismissOnClick && removeToast && id ? removeToast(id) : null)}\n        >\n            <Column>\n                <Typography {...textStyle.heading} color={colorConfig.color}>\n                    {content}\n                </Typography>\n                {description ? (\n                    <>\n                        <HorizontalSpacer n={1} />\n                        <Typography\n                            {...textStyle.description}\n                            color={hexToRGBA(colorConfig?.color, 0.5)}\n                        >\n                            {description}\n                        </Typography>\n                    </>\n                ) : null}\n            </Column>\n            <ToastIcon icon={icon} />\n        </ToastItem>\n    );\n};\n\nexport const ToastPortal = forwardRef((props, ref) => {\n    const [toastList, setToastList] = useState<ToastProps[]>([]);\n    const [removeId, setRemoveId] = useState<string | undefined>('');\n\n    useImperativeHandle(ref, () => ({\n        addToast(options: ToastProps) {\n            setToastList([...toastList, { ...options, id: generateId() }]);\n        },\n    }));\n\n    const removeToast = (id: string | undefined) => {\n        if (id) {\n            setToastList((toasts) => toasts.filter((toast) => toast.id !== id));\n        }\n    };\n\n    useEffect(() => {\n        if (removeId) {\n            removeToast(removeId);\n        }\n    }, [removeId]);\n\n    useEffect(() => {\n        if (toastList.length) {\n            const { id, autoCloseTime } = toastList[toastList.length - 1];\n            setTimeout(() => {\n                setRemoveId(id);\n            }, autoCloseTime || 3000);\n        }\n    }, [toastList]);\n\n    if (!toastList) return null;\n    if (toastList && !toastList.length) return null;\n\n    return (\n        <Portal>\n            <div>\n                {toastList.map((toastItemData) => {\n                    const { id, ...propsToFwd } = toastItemData;\n                    return <Toast key={id} id={id} {...propsToFwd} removeToast={removeToast} />;\n                })}\n            </div>\n        </Portal>\n    );\n});\n"],"names":["generateId","Math","random","toString","substring","DEFAULT_MSG","DEFAULT_TYPE","ToastIcon","icon","React","Toast","props","id","type","content","colorConfig","getToastColor","textStyle","_objectSpread","typographyGuide","toast","fullWidth","dismissOnClick","description","removeToast","autoCloseTime","background","heading","color","hexToRGBA","ToastPortal","forwardRef","ref","useState","toastList","setToastList","removeId","setRemoveId","useImperativeHandle","addToast","options","toasts","filter","useEffect","length","setTimeout","map","toastItemData","propsToFwd"],"mappings":"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"}