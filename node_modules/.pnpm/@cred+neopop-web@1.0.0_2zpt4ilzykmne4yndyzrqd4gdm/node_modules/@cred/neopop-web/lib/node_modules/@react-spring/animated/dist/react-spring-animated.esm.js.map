{"version":3,"file":"react-spring-animated.esm.js","sources":["../../../../../node_modules/@react-spring/animated/dist/react-spring-animated.esm.js"],"sourcesContent":["import { defineHidden, is, createInterpolator, eachProp, hasFluidValue, getFluidValue, each, isAnimatedString, useForceUpdate, useLayoutEffect, addFluidObserver, removeFluidObserver, raf, useOnce } from '@react-spring/shared';\nimport * as React from 'react';\nimport { forwardRef, useRef, useCallback, useEffect } from 'react';\n\nconst $node = Symbol.for('Animated:node');\nconst isAnimated = value => !!value && value[$node] === value;\nconst getAnimated = owner => owner && owner[$node];\nconst setAnimated = (owner, node) => defineHidden(owner, $node, node);\nconst getPayload = owner => owner && owner[$node] && owner[$node].getPayload();\nclass Animated {\n  constructor() {\n    this.payload = void 0;\n    setAnimated(this, this);\n  }\n\n  getPayload() {\n    return this.payload || [];\n  }\n\n}\n\nclass AnimatedValue extends Animated {\n  constructor(_value) {\n    super();\n    this.done = true;\n    this.elapsedTime = void 0;\n    this.lastPosition = void 0;\n    this.lastVelocity = void 0;\n    this.v0 = void 0;\n    this.durationProgress = 0;\n    this._value = _value;\n\n    if (is.num(this._value)) {\n      this.lastPosition = this._value;\n    }\n  }\n\n  static create(value) {\n    return new AnimatedValue(value);\n  }\n\n  getPayload() {\n    return [this];\n  }\n\n  getValue() {\n    return this._value;\n  }\n\n  setValue(value, step) {\n    if (is.num(value)) {\n      this.lastPosition = value;\n\n      if (step) {\n        value = Math.round(value / step) * step;\n\n        if (this.done) {\n          this.lastPosition = value;\n        }\n      }\n    }\n\n    if (this._value === value) {\n      return false;\n    }\n\n    this._value = value;\n    return true;\n  }\n\n  reset() {\n    const {\n      done\n    } = this;\n    this.done = false;\n\n    if (is.num(this._value)) {\n      this.elapsedTime = 0;\n      this.durationProgress = 0;\n      this.lastPosition = this._value;\n      if (done) this.lastVelocity = null;\n      this.v0 = null;\n    }\n  }\n\n}\n\nclass AnimatedString extends AnimatedValue {\n  constructor(value) {\n    super(0);\n    this._string = null;\n    this._toString = void 0;\n    this._toString = createInterpolator({\n      output: [value, value]\n    });\n  }\n\n  static create(value) {\n    return new AnimatedString(value);\n  }\n\n  getValue() {\n    let value = this._string;\n    return value == null ? this._string = this._toString(this._value) : value;\n  }\n\n  setValue(value) {\n    if (is.str(value)) {\n      if (value == this._string) {\n        return false;\n      }\n\n      this._string = value;\n      this._value = 1;\n    } else if (super.setValue(value)) {\n      this._string = null;\n    } else {\n      return false;\n    }\n\n    return true;\n  }\n\n  reset(goal) {\n    if (goal) {\n      this._toString = createInterpolator({\n        output: [this.getValue(), goal]\n      });\n    }\n\n    this._value = 0;\n    super.reset();\n  }\n\n}\n\nconst TreeContext = {\n  dependencies: null\n};\n\nclass AnimatedObject extends Animated {\n  constructor(source) {\n    super();\n    this.source = source;\n    this.setValue(source);\n  }\n\n  getValue(animated) {\n    const values = {};\n    eachProp(this.source, (source, key) => {\n      if (isAnimated(source)) {\n        values[key] = source.getValue(animated);\n      } else if (hasFluidValue(source)) {\n        values[key] = getFluidValue(source);\n      } else if (!animated) {\n        values[key] = source;\n      }\n    });\n    return values;\n  }\n\n  setValue(source) {\n    this.source = source;\n    this.payload = this._makePayload(source);\n  }\n\n  reset() {\n    if (this.payload) {\n      each(this.payload, node => node.reset());\n    }\n  }\n\n  _makePayload(source) {\n    if (source) {\n      const payload = new Set();\n      eachProp(source, this._addToPayload, payload);\n      return Array.from(payload);\n    }\n  }\n\n  _addToPayload(source) {\n    if (TreeContext.dependencies && hasFluidValue(source)) {\n      TreeContext.dependencies.add(source);\n    }\n\n    const payload = getPayload(source);\n\n    if (payload) {\n      each(payload, node => this.add(node));\n    }\n  }\n\n}\n\nclass AnimatedArray extends AnimatedObject {\n  constructor(source) {\n    super(source);\n  }\n\n  static create(source) {\n    return new AnimatedArray(source);\n  }\n\n  getValue() {\n    return this.source.map(node => node.getValue());\n  }\n\n  setValue(source) {\n    const payload = this.getPayload();\n\n    if (source.length == payload.length) {\n      return payload.map((node, i) => node.setValue(source[i])).some(Boolean);\n    }\n\n    super.setValue(source.map(makeAnimated));\n    return true;\n  }\n\n}\n\nfunction makeAnimated(value) {\n  const nodeType = isAnimatedString(value) ? AnimatedString : AnimatedValue;\n  return nodeType.create(value);\n}\n\nfunction getAnimatedType(value) {\n  const parentNode = getAnimated(value);\n  return parentNode ? parentNode.constructor : is.arr(value) ? AnimatedArray : isAnimatedString(value) ? AnimatedString : AnimatedValue;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nconst withAnimated = (Component, host) => {\n  const hasInstance = !is.fun(Component) || Component.prototype && Component.prototype.isReactComponent;\n  return forwardRef((givenProps, givenRef) => {\n    const instanceRef = useRef(null);\n    const ref = hasInstance && useCallback(value => {\n      instanceRef.current = updateRef(givenRef, value);\n    }, [givenRef]);\n    const [props, deps] = getAnimatedState(givenProps, host);\n    const forceUpdate = useForceUpdate();\n\n    const callback = () => {\n      const instance = instanceRef.current;\n\n      if (hasInstance && !instance) {\n        return;\n      }\n\n      const didUpdate = instance ? host.applyAnimatedValues(instance, props.getValue(true)) : false;\n\n      if (didUpdate === false) {\n        forceUpdate();\n      }\n    };\n\n    const observer = new PropsObserver(callback, deps);\n    const observerRef = useRef();\n    useLayoutEffect(() => {\n      observerRef.current = observer;\n      each(deps, dep => addFluidObserver(dep, observer));\n      return () => {\n        if (observerRef.current) {\n          each(observerRef.current.deps, dep => removeFluidObserver(dep, observerRef.current));\n          raf.cancel(observerRef.current.update);\n        }\n      };\n    });\n    useEffect(callback, []);\n    useOnce(() => () => {\n      const observer = observerRef.current;\n      each(observer.deps, dep => removeFluidObserver(dep, observer));\n    });\n    const usedProps = host.getComponentProps(props.getValue());\n    return React.createElement(Component, _extends({}, usedProps, {\n      ref: ref\n    }));\n  });\n};\n\nclass PropsObserver {\n  constructor(update, deps) {\n    this.update = update;\n    this.deps = deps;\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      raf.write(this.update);\n    }\n  }\n\n}\n\nfunction getAnimatedState(props, host) {\n  const dependencies = new Set();\n  TreeContext.dependencies = dependencies;\n  if (props.style) props = _extends({}, props, {\n    style: host.createAnimatedStyle(props.style)\n  });\n  props = new AnimatedObject(props);\n  TreeContext.dependencies = null;\n  return [props, dependencies];\n}\n\nfunction updateRef(ref, value) {\n  if (ref) {\n    if (is.fun(ref)) ref(value);else ref.current = value;\n  }\n\n  return value;\n}\n\nconst cacheKey = Symbol.for('AnimatedComponent');\nconst createHost = (components, {\n  applyAnimatedValues: _applyAnimatedValues = () => false,\n  createAnimatedStyle: _createAnimatedStyle = style => new AnimatedObject(style),\n  getComponentProps: _getComponentProps = props => props\n} = {}) => {\n  const hostConfig = {\n    applyAnimatedValues: _applyAnimatedValues,\n    createAnimatedStyle: _createAnimatedStyle,\n    getComponentProps: _getComponentProps\n  };\n\n  const animated = Component => {\n    const displayName = getDisplayName(Component) || 'Anonymous';\n\n    if (is.str(Component)) {\n      Component = animated[Component] || (animated[Component] = withAnimated(Component, hostConfig));\n    } else {\n      Component = Component[cacheKey] || (Component[cacheKey] = withAnimated(Component, hostConfig));\n    }\n\n    Component.displayName = `Animated(${displayName})`;\n    return Component;\n  };\n\n  eachProp(components, (Component, key) => {\n    if (is.arr(components)) {\n      key = getDisplayName(Component);\n    }\n\n    animated[key] = animated(Component);\n  });\n  return {\n    animated\n  };\n};\n\nconst getDisplayName = arg => is.str(arg) ? arg : arg && is.str(arg.displayName) ? arg.displayName : is.fun(arg) && arg.name || null;\n\nexport { Animated, AnimatedArray, AnimatedObject, AnimatedString, AnimatedValue, createHost, getAnimated, getAnimatedType, getPayload, isAnimated, setAnimated };\n"],"names":["$node","Symbol","isAnimated","value","getAnimated","owner","setAnimated","node","defineHidden","getPayload","Animated","_classCallCheck","payload","AnimatedValue","_value","done","elapsedTime","lastPosition","lastVelocity","v0","durationProgress","is","num","step","Math","round","AnimatedString","_string","_toString","createInterpolator","output","str","goal","getValue","_get","_getPrototypeOf","TreeContext","dependencies","AnimatedObject","source","setValue","animated","values","eachProp","key","hasFluidValue","getFluidValue","_makePayload","each","reset","Set","_addToPayload","Array","from","add","AnimatedArray","map","length","i","some","Boolean","makeAnimated","nodeType","isAnimatedString","create","getAnimatedType","parentNode","constructor","arr","_extends","Object","assign","target","arguments","prototype","hasOwnProperty","call","apply","withAnimated","Component","host","hasInstance","fun","isReactComponent","forwardRef","givenProps","givenRef","instanceRef","useRef","ref","useCallback","current","updateRef","getAnimatedState","_slicedToArray","props","deps","forceUpdate","useForceUpdate","callback","instance","didUpdate","applyAnimatedValues","observer","PropsObserver","observerRef","useLayoutEffect","dep","addFluidObserver","removeFluidObserver","raf","cancel","update","useEffect","useOnce","usedProps","getComponentProps","React","createElement","event","type","write","style","createAnimatedStyle","cacheKey","createHost","components","_applyAnimatedValues","_createAnimatedStyle","_getComponentProps","hostConfig","displayName","getDisplayName","arg","name"],"mappings":"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"}